<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="apitoken"
      content="UqohHTcuptTyrMpn3Mstk0PrRkPyC7M6IFzjGvegwmLE2cIxFJAlZHeFvlWPAqiMPguxPZ1a5vCvlGJhyXYJM97uqi"
    />
    <link rel="stylesheet" href="../css/kreiraj_lokaciju.css" />
    <title>Kreiranje lokacija</title>

    <script
      src="https://code.jquery.com/jquery-3.6.1.js"
      integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
      crossorigin="anonymous"
    ></script>
    <script>
      $(function () {
        var radno_vreme = [];
        var radni_dan;
        var sati_od = 0;
        var sati_do = 0;

        //ukljucivanje vremena do kad se radi
        $("#vreme_od_sati_1").on("blur", function () {
          $("#vreme_do_sati_1").prop("disabled", false);
        });

        $("#vreme_do_sati_1").on("change", function () {
          radni_dan = $("#dan1").val() * 1;
          let vreme_od = $("#vreme_od_sati_1").val();
          let vreme_do = $("#vreme_do_sati_1").val();

          radno_vreme.push({
            dan: radni_dan,
            od: vreme_od,
            do: vreme_do,
          });

          console.log(radno_vreme);
        });

        $("#vreme_od_sati_2").on("blur", function () {
          $("#vreme_do_sati_2").prop("disabled", false);
        });

        $("#vreme_do_sati_2").on("change", function () {
          radni_dan = $("#dan2").val() * 1;
          let vreme_od = $("#vreme_od_sati_2").val();
          let vreme_do = $("#vreme_do_sati_2").val();

          radno_vreme.push({
            dan: radni_dan,
            od: vreme_od,
            do: vreme_do,
          });

          console.log(radno_vreme);
        });

        $("#vreme_od_sati_3").on("blur", function () {
          $("#vreme_do_sati_3").prop("disabled", false);
        });

        $("#vreme_do_sati_3").on("change", function () {
          radni_dan = $("#dan3").val() * 1;
          let vreme_od = $("#vreme_od_sati_3").val();
          let vreme_do = $("#vreme_do_sati_3").val();

          radno_vreme.push({
            dan: radni_dan,
            od: vreme_od,
            do: vreme_do,
          });

          console.log(radno_vreme);
        });

        $("#vreme_od_sati_4").on("blur", function () {
          $("#vreme_do_sati_4").prop("disabled", false);
        });

        $("#vreme_do_sati_4").on("change", function () {
          radni_dan = $("#dan4").val() * 1;
          let vreme_od = $("#vreme_od_sati_4").val();
          let vreme_do = $("#vreme_do_sati_4").val();

          radno_vreme.push({
            dan: radni_dan,
            od: vreme_od,
            do: vreme_do,
          });

          console.log(radno_vreme);
        });

        $("#vreme_od_sati_5").on("blur", function () {
          $("#vreme_do_sati_5").prop("disabled", false);
        });
        $("#vreme_do_sati_5").on("change", function () {
          radni_dan = $("#dan5").val() * 1;
          let vreme_od = $("#vreme_od_sati_5").val();
          let vreme_do = $("#vreme_do_sati_5").val();

          radno_vreme.push({
            dan: radni_dan,
            od: vreme_od,
            do: vreme_do,
          });

          console.log(radno_vreme);
        });

        $("#vreme_od_sati_6").on("blur", function () {
          $("#vreme_do_sati_6").prop("disabled", false);
        });

        $("#vreme_do_sati_6").on("change", function () {
          radni_dan = $("#dan6").val() * 1;
          let vreme_od = $("#vreme_od_sati_6").val();
          let vreme_do = $("#vreme_do_sati_6").val();

          radno_vreme.push({
            dan: radni_dan,
            od: vreme_od,
            do: vreme_do,
          });

          console.log(radno_vreme);
        });

        $("#vreme_od_sati_7").on("blur", function () {
          $("#vreme_do_sati_7").prop("disabled", false);
        });

        $("#vreme_do_sati_7").on("change", function () {
          radni_dan = $("#dan7").val() * 1;
          let vreme_od = $("#vreme_od_sati_7").val();
          let vreme_do = $("#vreme_do_sati_7").val();

          radno_vreme.push({
            dan: radni_dan,
            od: vreme_od,
            do: vreme_do,
          });

          console.log(radno_vreme);
        });

        $("#forma").on("submit", function (e) {
          e.preventDefault();

          var settings = {
            url: "https://vsis.mef.edu.rs/projekat/ulaznice/public_html/api/lokacija",
            method: "POST",
            timeout: 0,
            headers: {
              Accept: "application/json",
              Authorization: "Bearer " + localStorage.getItem("token"),
              "Content-Type": "application/x-www-form-urlencoded",
            },
            data: {
              name: $("#naziv").val(),
              address: $("#adresa").val(),
              city: $("#grad").val(),
              description: $("#opis").val(),
              workingHours: JSON.stringify(radno_vreme),
              apitoken: $('meta[name="apitoken"]').attr("content"),
            },
          };

          $.ajax(settings).done(function (response) {
            console.log(response);
          });
        });
      });
    </script>
  </head>

  <body>
    <form
      id="forma"
      method="post"
      action="https://vsis.mef.edu.rs/projekat/ulaznice/public_html/api/lokacija"
    >
      <label for="naziv">Naziv lokacije:</label><br />
      <input
        type="text"
        id="naziv"
        name="naziv_lokacije"
        placeholder="Ovde uneti naziv"
        required
      /><br />
      <p id="p1"></p>

      <label for="adresa">Adresa:</label><br />
      <input
        type="tel"
        id="adresa"
        name="adresa_lokacije"
        placeholder="Ovde uneti adresu"
        required
      />
      <br />
      <p id="p2"></p>

      <label for="grad">Grad:</label><br />
      <input
        type="text"
        id="grad"
        name="grad_lokacije"
        placeholder="Ovde uneti grad"
        required
      /><br />
      <p id="p5"></p>

      <label for="opis">Opis:</label><br />
      <textarea
        id="opis"
        name="opis_lokacije"
        placeholder="Ovde unesite opis"
      ></textarea>
      <p id="p3"></p>

      <div id="radno_vreme">
        <label for="opis">Ponedeljak</label><br />
        <input type="text" id="dan1" name="danUnedelji" value="1" hidden />
        <input type="time" id="vreme_od_sati_1" name="vreme_od_sati" />
        <input type="time" id="vreme_do_sati_1" name="vreme_do_sati" disabled />
        <br /><br />

        <label for="opis">Utorak</label><br />
        <input type="text" id="dan2" name="danUnedelji" value="2" hidden />
        <input type="time" id="vreme_od_sati_2" name="vreme_od_sati" />
        <input type="time" id="vreme_do_sati_2" name="vreme_do_sati" disabled />
        <br /><br />

        <label for="opis">Sreda</label><br />
        <input type="text" id="dan3" name="danUnedelji" value="3" hidden />
        <input type="time" id="vreme_od_sati_3" name="vreme_od_sati" />
        <input type="time" id="vreme_do_sati_3" name="vreme_do_sati" disabled />
        <br /><br />

        <label for="opis">Cetvrtak</label><br />
        <input type="text" id="dan4" name="danUnedelji" value="4" hidden />
        <input type="time" id="vreme_od_sati_4" name="vreme_od_sati" />
        <input type="time" id="vreme_do_sati_4" name="vreme_do_sati" disabled />
        <br /><br />

        <label for="opis">Petak</label><br />
        <input type="text" id="dan5" name="danUnedelji" value="5" hidden />
        <input type="time" id="vreme_od_sati_5" name="vreme_od_sati" />
        <input type="time" id="vreme_do_sati_5" name="vreme_do_sati" disabled />
        <br /><br />

        <label for="opis">Subota</label><br />
        <input type="text" id="dan6" name="danUnedelji" value="6" hidden />
        <input type="time" id="vreme_od_sati_6" name="vreme_od_sati" />
        <input type="time" id="vreme_do_sati_6" name="vreme_do_sati" disabled />
        <br /><br />

        <label for="opis">Nedelja</label><br />
        <input type="text" id="dan7" name="danUnedelji" value="7" hidden />
        <input type="time" id="vreme_od_sati_7" name="vreme_od_sati" />
        <input type="time" id="vreme_do_sati_7" name="vreme_do_sati" disabled />
        <br /><br />
      </div>

      <button type="submit">Registruj se</button>
      <p id="p6"></p>
    </form>
  </body>
</html>
